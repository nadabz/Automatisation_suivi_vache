{% extends 'layout_admin.html.twig' %}
{% form_theme form 'bootstrap_3_layout.html.twig' %}

{% block title %}Liste des aliments{% endblock %}
{% block title_parag %}Liste des aliments{% endblock %}
{% block body %}
    <h2>Liste des aliments</h2>

    <div class="row marg_bot_20">
        <div class="col-md-12">
            <ul class="liste_btn_action">
                <li>
                    <a class="btn btn-primary" href="{{ path('aliment_new') }}"><span class="fa fa-plus"></span> Nouvelle aliment</a>
                </li>
            </ul>
        </div>
    </div>

    <div class="row">
        <div class="col-md-12">
            {{ form_start(form) }}
            <div class="row">
                <div class="col-md-3">
                    {{ form_row(form.code,{'value':app.request.get('code')}) }}
                </div>

                <div class="col-md-3" style="margin-top: 25px;">
                    <button type="submit" class="btn btn-success"><span class="fa fa-search"></span></button>
                    <a href="{{ path('vache_index') }}" class="btn btn-danger"><span class="fa fa-times"></span></a>
                </div>
            </div>
            {{ form_end(form) }}
        </div>
    </div>
    <table class="table">
        <thead>
            <tr>
                <th>Code</th>
                <th>Designation</th>
                <th>Quantité de stock</th>
                <th>Quantité minimale de stock</th>
                <th class="text-right">Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for aliment in aliments %}
        {% set bg_color='' %}
            {% if aliment.qteStock<= aliment.qteMin %}
        {% set bg_color='background-color:#F9D8D1' %}

        {% endif %}

            {% if aliment.qteStock<= aliment.qteMin %}

            <script>  alert("La quantité minimale est attiente")</script>

            {% endif %}
            <tr style="{{ bg_color }}">
                <td>{{ aliment.code }}</td>
                <td>{{ aliment.designation }}</td>
                <td>{{ aliment.qteStock }}</td>
                <td>{{ aliment.qteMin }}</td>
                <td>
                        <ul class="liste_btn_action">
                            <li>
                                <a class="btn btn-warning btn-xs" href="{{ path('aliment_edit', { 'id': aliment.id }) }}"><span class="fa fa-edit"></span> Modifier</a>
                            </li>
                        <li>
                            <a class="btn btn-info btn-xs" href="{{ path('aliment_show', { 'id': aliment.id }) }}"> <span class="fa fa-info"></span> Détails</a>
                        </li>

                    </ul>
                </td>
            </tr>
        {% endfor %}

        </tbody>
    </table>

{% endblock %}
